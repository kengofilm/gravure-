<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>グラビア印刷ラーニング（GitHub Pages版）</title>
<link rel="stylesheet" href="styles.css" />
<meta name="color-scheme" content="light dark">
</head>
<body>
<div class="wrap">
  <header class="topbar">
    <h1>🎨 グラビア印刷ラーニング</h1>
    <nav class="tabs">
      <button class="tab active" data-tab="train">トレーニング</button>
      <button class="tab" data-tab="glossary">用語集</button>
      <button class="tab" data-tab="diagram">図式モード</button>
      <button class="tab" data-tab="handbook">参考書</button>
    </nav>
  </header>

  <section id="tab-train" class="panel">
    <div class="grid cols-3">
      <div>
        <div class="small muted">出題モード</div>
        <select id="mode">
          <option value="random">ランダム</option>
          <option value="category">カテゴリ指定</option>
          <option value="weak">苦手分野優先</option>
          <option value="wrong">間違えた問題のみ</option>
        </select>
      </div>
      <div>
        <div class="small muted">カテゴリ（複数選択可）</div>
        <select id="category" multiple size="8"></select>
      </div>
      <div>
        <div class="small muted">出題数</div>
        <div class="btnrow">
          <button class="btn-qty" data-n="10">10問</button>
          <button class="btn-qty" data-n="30">30問</button>
          <button class="btn-qty" data-n="50">50問</button>
        </div>
        <input id="count" type="number" min="1" max="200" value="10"/>
        <div style="height:8px"></div>
        <button id="start" class="primary">▶ スタート</button>
        <div style="height:8px"></div>
        <div id="stats" class="small muted">ロード中…</div>
      </div>
    </div>
    <div id="game"></div>
  </section>

  <section id="tab-glossary" class="panel" style="display:none">
    <div class="grid cols-3">
      <div>
        <div class="small muted">検索</div>
        <input id="gSearch" type="text" placeholder="用語を入力…" />
      </div>
      <div>
        <div class="small muted">カテゴリ</div>
        <select id="gCat">
          <option value="all">すべて</option>
        </select>
      </div>
      <div style="align-self:end">
        <span id="gCount" class="tag">0 語</span>
      </div>
    </div>
    <ul id="gList" class="glossary-list"></ul>
    <div id="gDetail" class="detail" style="display:none"></div>
  </section>

  <section id="tab-diagram" class="panel" style="display:none">
    <h3 style="margin-top:0">🗺️ 図式モード（入稿→色校→実機刷り）</h3>
    <div class="diagram-wrap">
      <svg viewBox="0 0 900 260" class="flow">
        <defs>
          <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="currentColor"></path>
          </marker>
        </defs>
        <g class="node" data-term="デザイン入稿" transform="translate(40,40)">
          <rect rx="12" ry="12" width="180" height="60" class="box" />
          <text x="90" y="38" class="label">デザイン入稿</text>
          <text x="90" y="54" class="sublabel">データ/プロファイル</text>
        </g>
        <g class="node" data-term="色校正" transform="translate(260,40)">
          <rect rx="12" ry="12" width="180" height="60" class="box" />
          <text x="90" y="38" class="label">色校正</text>
          <text x="90" y="54" class="sublabel">基準/ΔE/D50</text>
        </g>
        <g class="node" data-term="製版/版" transform="translate(480,40)">
          <rect rx="12" ry="12" width="180" height="60" class="box" />
          <text x="90" y="38" class="label">製版/版</text>
          <text x="90" y="54" class="sublabel">セル/線数</text>
        </g>
        <g class="node" data-term="実機刷り" transform="translate(700,40)">
          <rect rx="12" ry="12" width="180" height="60" class="box" />
          <text x="90" y="38" class="label">実機刷り</text>
          <text x="90" y="54" class="sublabel">条件最適/QA</text>
        </g>

        <g class="node small" data-term="白引き" transform="translate(150,150)">
          <rect rx="10" ry="10" width="140" height="46" class="box small" />
          <text x="70" y="30" class="label">白引き</text>
        </g>
        <g class="node small" data-term="見当/レジ" transform="translate(360,150)">
          <rect rx="10" ry="10" width="160" height="46" class="box small" />
          <text x="80" y="30" class="label">見当/レジ</text>
        </g>
        <g class="node small" data-term="残留溶剤" transform="translate(560,150)">
          <rect rx="10" ry="10" width="160" height="46" class="box small" />
          <text x="80" y="30" class="label">残留溶剤</text>
        </g>

        <line x1="220" y1="70" x2="260" y2="70" class="arrow"></line>
        <line x1="440" y1="70" x2="480" y2="70" class="arrow"></line>
        <line x1="660" y1="70" x2="700" y2="70" class="arrow"></line>
        <line x1="210" y1="170" x2="360" y2="170" class="arrow"></line>
        <line x1="520" y1="170" x2="560" y2="170" class="arrow"></line>
      </svg>
      <div class="small muted">※ 各ボックスをタップすると該当用語へジャンプします</div>
    </div>
  </section>

  <section id="tab-handbook" class="panel" style="display:none">
    <h3 style="margin-top:0">📖 参考書モード（体系的に学ぶ）</h3>
    <div class="grid cols-3">
      <div>
        <div class="small muted">章</div>
        <select id="hbChapter"></select>
      </div>
      <div>
        <div class="small muted">節</div>
        <select id="hbSection"></select>
      </div>
      <div style="align-self:end">
        <span class="tag" id="hbPos">1/1</span>
      </div>
    </div>
    <article id="hbContent" class="handbook"></article>
  </section>
</div>

<script src="app.js"></script>
</body>
</html>
